<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <title>ΑΣΦΑΛΕΙΑ - ΑΠΟΡΡΗΤΟ</title>
    <link rel="stylesheet" href="style.css">
    <!-- Προσθήκη του Firebase SDK -->
    <script type="module" src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
    <script type="module" src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js"></script>
    <script type="module" src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js"></script>     
</head>
<body>
     <div class="container">
        <nav class="navbar">
            <h1 class="logo">Dashboard</h1>
            <div class="nav-links">
                <a href="faq.html" class="btn">Συχνές Ερωτήσεις</a>
                <a href="chat.html" class="btn">Chat</a>
                <a href="#" id="logoutButton" class="btn">Αποσύνδεση</a>
            </div>
        </nav>

        <main class="quiz">
            <br>
            <br>
            <br>
            <br>
            <br>             
            <br>  
            <h1>Ασφάλεια και Απόρρητο <span id="info-icon" class="info-button">&#8505;</span></h1>
            <div id="info-container" style="display: none;">
                <br>
                <p>Η ασφάλεια στον κλάδο της τηλε-υγείας αποτελεί μια ολοκληρωμένη προσέγγιση για τη διασφάλιση της προστασίας των ασθενών και της παροχής ποιοτικής φροντίδας μέσω τεχνολογιών τηλε-φροντίδας. Περιλαμβάνει τρεις υποτομείς:</p>
                <br><p>• Την λειτουργική ακεραιότητα και την ακεραιότητα των υποδομών (Ασφάλεια - Απόρρητο)</p>
                <br><p>• Την ψυχολογική και συναισθηματική ασφάλεια</p>
                <br><p>• Την διακυβέρνηση και τα οικονομικά ζητήματα</p>
            </div>
            <form id="questionnaire3">
                <!-- Ερώτηση 14 -->
                <div class="question">
                    <h2>Λειτουργική Ακεραιότητα και Ακεραιότητα Υποδομών</h2>
                    <p><b>Σύμφωνα με τα παρακάτω, επιλέξτε το επίπεδο ωριμότητας που αντιστοιχεί στην υπηρεσία:</b></p>
                    <p align="left">Οι οργανισμοί είναι υπεύθυνοι για την τήρηση των υφιστάμενων κατευθυντήριων γραμμών. Οφείλουν να διαθέτουν μηχανισμό που θα αξιολογεί την ασφάλεια όλων των υπηρεσιών τηλε-υγείας. Φέρουν επιπλέον την ευθύνη για την εκπαίδευση του προσωπικού και των ασθενών. Το προσωπικό θα πρέπει να γνωρίζει τις βέλτιστες πρακτικές και τεχνικές για τη διασφάλιση των υψηλότερων επιπέδων προστασίας της ιδιωτικής ζωής και της ασφάλειας. Οι ασθενείς θα πρέπει επίσης να εκπαιδεύονται σχετικά με τη σημασία της ιδιωτικότητας και της ασφάλειας και τους τρόπους προστασίας των προσωπικών τους πληροφοριών και του ιατρικού ιστορικού τους.</p>
                    <label><input type="radio" name="question14" value="1" required>Δεν υπάρχουν κατευθυντήριες οδηγίες.</label><br>
                    <label><input type="radio" name="question14" value="2" required>Υπάρχουν διεθνείς κατευθυντήριες γραμμές για την ασφάλεια στον κυβερνοχώρο και την ασφάλεια των πληροφορίων.</label><br>
                    <label><input type="radio" name="question14" value="3" required>Υπάρχει ειδική καθοδήγηση για τις υπηρεσίες τηλε-υγείας.</label><br>
                    <label><input type="radio" name="question14" value="4" required>Υπάρχει καθοδήγηση και μηχανισμός ειδικά για τις υπηρεσίες τηλε-υγείας.</label><br>
                    <label><input type="radio" name="question14" value="5" required>Υπάρχει καθοδήγηση, μηχανισμός και εκπαίδευση για τους ασθενείς και τους επαγγελματίες υγείας.</label><br>
                </div>

                <!-- Ερώτηση 15 -->
                <div class="question">
                    <h2>Ψυχολογική και Συναισθηματική Ασφάλεια</h2>
                    <p><b>Σύμφωνα με τα παρακάτω, επιλέξτε το επίπεδο ωριμότητας που αντιστοιχεί στην υπηρεσία:</b></p>
                    <p align="left">Οι οργανισμοί οφείλουν να ακολουθούν τις κατευθυντήριες γραμμές για την εφαρμογή της ψυχολογικής και συναισθηματικής ασφάλειας. Θα πρέπει επίσης να διαθέτουν έναν μηχανισμό που να αξιολογεί εάν εφαρμόζονται αυτές οι οδηγίες στις παρεχόμενες υπηρεσίες. Επιπλέον, θα πρέπει να δημιουργηθεί ένας μηχανισμός ανατροφοδότησης που να επιτρέπει την αναφορά περιστατικών για τυχόν βλάβες κατά τη διάρκεια συνεδριών τηλε-υγείας. Για την αποφυγή τέτοιας βλάβης, είναι απαραίτητο οι οργανισμοί να καθιερώσουν εκπαίδευση σε θέματα πολιτισμικής εξειδίκευσης τόσο για το προσωπικό όσο και για τους ασθενείς. Οι επαγγελματίες τηλε-υγείας οφείλουν να γνωρίζουν τις βέλτιστες πρακτικές για την αποφυγή οποιασδήποτε ψυχολογικής ή συναισθηματικής βλάβης των ασθενών. Οι ασθενείς, από την άλλη πλευρά, πρέπει να ενημερώνονται για τα δικαιώματά τους και τους τρόπους αναφοράς πιθανής βλάβης και να λαμβάνουν πληροφορίες για οποιαδήποτε σχετική υποστήριξη από τους παρόχους.</p>
                    <label><input type="radio" name="question15" value="1" required>Δεν υπάρχουν κατευθυντήριες οδηγίες.</label><br>
                    <label><input type="radio" name="question15" value="2" required>Υπάρχουν γενικές κατευθυντήριες γραμμές για την ψυχολογική και συναισθηματική ασφάλεια στην υγειονομική περίθαλψη.</label><br>
                    <label><input type="radio" name="question15" value="3" required>Δημιουργείται εξειδικευμένη πολιτική για την ψυχολογική και συναισθηματική ασφάλεια στον τομέα της τηλε-υγείας.</label><br>
                    <label><input type="radio" name="question15" value="4" required>Υπάρχουν ειδικές κατευθυντήριες γραμμές για την τηλε-υγεία με εκπαιδευτικές δραστηριότητες για τους επαγγελματίες και ένα σύστημα παραπόνων.</label><br>
                    <label><input type="radio" name="question15" value="5" required>Υπάρχουν κατευθυντήριες γραμμές και ένας μηχανισμός για τη διασφάλιση της ψυχολογικής και συναισθηματικής ασφάλειας στις υπηρεσίες τηλε-υγείας.</label><br>
                </div>

                <!-- Ερώτηση 16 -->
                <div class="question">
                    <h2>Διακυβέρνηση</h2>
                    <p><b>Σύμφωνα με τα παρακάτω, επιλέξτε το επίπεδο ωριμότητας που αντιστοιχεί στην υπηρεσία:</b></p>
                    <p align="left">Οι οργανισμοί χρειάζονται ένα σύστημα διακυβέρνησης που διασφαλίζει την εναρμόνιση των διαφόρων υπηρεσιών τηλε-υγείας στο πλαίσιο των διαδικασιών παροχής υγειονομικής περίθαλψης.  Η ύπαρξη μιας ώριμης και εκπαιδευμένης ομάδας που συντονίζει τις υπηρεσίες τηλε-υγείας είναι καθοριστικής σημασίας, καθώς και οι διαδικασίες για τη συμμετοχή και τον οραματισμό των επόμενων βημάτων στην οργανωτική χρήση της.</p>
                    <label><input type="radio" name="question16" value="1" required>Δεν υπάρχει σύστημα διακυβέρνησης.</label><br>
                    <label><input type="radio" name="question16" value="2" required>Δεν υπάρχει ειδικός συντονιστής τηλε-υγείας και το ρόλο αυτό αναλαμβάνει ένας κλινικός διευθυντής ή ένας διευθυντής πληροφορικής.</label><br>
                    <label><input type="radio" name="question16" value="3" required>Υπάρχει ειδικός συντονιστής τηλε-υγείας.</label><br>
                    <label><input type="radio" name="question16" value="4" required>Υπάρχει ένα ολοκληρωμένο σύστημα διακυβέρνησης της τηλε-υγείας.</label><br>
                    <label><input type="radio" name="question16" value="5" required>Το σύστημα διακυβέρνησης της τηλε-υγείας είναι ώριμο και παρέχεται ειδική κατάρτιση στο προσωπικό σχετικά με αυτό.</label><br>
                </div>

                <button type="submit" onclick="return calculateScore(event);" class="btn primary">Υποβολή</button>
            </form>
            <div  id="displayResults"></div>
        </main>
    </div>
<!--    <script>       
        document.getElementById('info-icon').onclick = function() {
            var infoContainer = document.getElementById('info-container');
            infoContainer.style.display = (infoContainer.style.display === 'none') ? 'block' : 'none';
        };

        // Παίρνουμε τον username του τρέχοντος χρήστη
        const username = localStorage.getItem("currentUser");

        if (!username) {
            alert("Δεν υπάρχει ενεργός χρήστης! Παρακαλώ συνδεθείτε.");
            window.location.href = "index.html";
        }

        // Βρίσκουμε το κουίζ και το κουμπί υποβολής
        const form = document.getElementById('questionnaire3');
        const resultContainer = document.createElement('div');
        resultContainer.setAttribute('id', 'displayResults');
        form.appendChild(resultContainer);

        // Λειτουργία για να υπολογίσουμε το σκορ
        function calculateScore() {
            let totalScore = 0;
            const answers = [];
            const questions = form.querySelectorAll('.question');

            questions.forEach(question => {
            const selectedOption = question.querySelector('input[type="radio"]:checked');

                if (selectedOption) {
                totalScore += parseInt(selectedOption.value);
                answers.push(selectedOption.parentElement.textContent.trim());
            }
        });

        // Αποθηκεύουμε το σκορ στο localStorage
        localStorage.setItem('score3', totalScore);
        localStorage.setItem('answers3', JSON.stringify(answers));

        // Εμφάνιση του συνολικού σκορ
        resultContainer.innerHTML = `<h3>Το σκορ σας είναι: ${totalScore}</h3>`;
        resultContainer.style.display = 'block';

        return totalScore;
    }

    // Προσθέτουμε το event listener για το κουμπί υποβολής
    form.addEventListener('submit', function(event) {
        event.preventDefault(); // Αποτρέπουμε την υποβολή της φόρμας
        const score3 = calculateScore(); // Υπολογισμός σκορ

        // Εμφάνιση alert με το σκορ
         alert('Το σκορ σας είναι: ' + score3);

        const score1 = parseInt(localStorage.getItem('score1')) || 0;
        const score2 = parseInt(localStorage.getItem('score2')) || 0;

        const answers1 = JSON.parse(localStorage.getItem('answers1')) || [];
        const answers2 = JSON.parse(localStorage.getItem('answers2')) || [];
        const answers3 = JSON.parse(localStorage.getItem('answers3')) || [];

        const allAnswers = [...answers1, ...answers2, ...answers3];
        localStorage.setItem(`answers_${username}`, JSON.stringify(allAnswers));
        let users = JSON.parse(localStorage.getItem('users')) || [];
        const existingUserIndex = users.findIndex(user => user.username === username);

        if (existingUserIndex !== -1) {
            // Αν υπάρχει, ενημερώνουμε τα σκορ του
            users[existingUserIndex].score1 = score1;
            users[existingUserIndex].score2 = score2;
            users[existingUserIndex].score3 = score3;
            users[existingUserIndex].answers = [...answers1, ...answers2, ...answers3];
        } else {
            // Αν δεν υπάρχει, προσθέτουμε νέο χρήστη
            users.push({
                username: username,
                score1: score1,
                score2: score2,
                score3: score3,
             answers: [...answers1, ...answers2, ...answers3]
            });
        }

        // Αποθήκευση των χρηστών στο localStorage
        localStorage.setItem('users', JSON.stringify(users));

        alert('Τα αποτελέσματά σας αποθηκεύτηκαν επιτυχώς!');    

        setTimeout(function() {
            // Ανακατεύθυνση στη σελίδα αποτελεσμάτων
             window.location.href = 'user_results.html';  
        }, 1500);
     });                    
    </script> -->

    <script>
        document.getElementById('info-icon').onclick = function() {
            var infoContainer = document.getElementById('info-container');
            infoContainer.style.display = (infoContainer.style.display === 'none') ? 'block' : 'none';
        };
    
        // Βεβαιωνόμαστε ότι ο χρήστης έχει συνδεθεί μέσω Firebase Authentication
        firebase.auth().onAuthStateChanged(function(user) {
            if (!user) {
                alert("Δεν υπάρχει ενεργός χρήστης! Παρακαλώ συνδεθείτε.");
                window.location.href = "index.html"; // Αν δεν υπάρχει χρήστης, επιστροφή στη σελίδα login
            }
    
            // Ο χρήστης είναι συνδεδεμένος, μπορούμε να συνεχίσουμε
            const username = user.email;  // Παίρνουμε το email του χρήστη (μπορείς να το προσαρμόσεις αν χρησιμοποιείς άλλο πεδίο)
    
            // Επιλογή της φόρμας
            const form = document.getElementById('questionnaire3');
            const resultContainer = document.createElement('div');
            resultContainer.setAttribute('id', 'displayResults');
            form.appendChild(resultContainer);
    
            // Λειτουργία για να υπολογίσουμε το σκορ
            function calculateScore() {
                let totalScore = 0;
                const answers = [];
                const questions = form.querySelectorAll('.question');
    
                questions.forEach(question => {
                    const selectedOption = question.querySelector('input[type="radio"]:checked');
    
                    if (selectedOption) {
                        totalScore += parseInt(selectedOption.value);
                        answers.push(selectedOption.parentElement.textContent.trim());
                    }
                });
    
                // Αποθηκεύουμε το σκορ και τις απαντήσεις στο Firebase
                const scoreData = {
                    score: totalScore,
                    answers: answers,
                    username: username,
                    timestamp: new Date().toISOString()  // Αποθήκευση ημερομηνίας
                };
    
                // Αποθήκευση στο Firebase Database
                const scoreRef = firebase.database().ref('scores');
                scoreRef.push(scoreData);
    
                // Εμφάνιση του συνολικού σκορ
                resultContainer.innerHTML = `<h3>Το σκορ σας είναι: ${totalScore}</h3>`;
                resultContainer.style.display = 'block';
    
                return totalScore;
            }
    
            // Προσθέτουμε το event listener για το κουμπί υποβολής
            form.addEventListener('submit', function(event) {
                event.preventDefault(); // Αποτρέπουμε την υποβολή της φόρμας
                const score3 = calculateScore(); // Υπολογισμός σκορ
    
                // Εμφάνιση alert με το σκορ
                alert('Το σκορ σας είναι: ' + score3);
    
                // Παίρνουμε τα σκορ και τις απαντήσεις από τα προηγούμενα ερωτηματολόγια
                const score1 = parseInt(localStorage.getItem('score1')) || 0;
                const score2 = parseInt(localStorage.getItem('score2')) || 0;
    
                const answers1 = JSON.parse(localStorage.getItem('answers1')) || [];
                const answers2 = JSON.parse(localStorage.getItem('answers2')) || [];
                const answers3 = JSON.parse(localStorage.getItem('answers3')) || [];
    
                const allAnswers = [...answers1, ...answers2, ...answers3];
    
                // Αποθήκευση όλων των απαντήσεων στον Firebase
                const userAnswersRef = firebase.database().ref('user_answers/' + user.uid);
                userAnswersRef.set({
                    answers: allAnswers,
                    score1: score1,
                    score2: score2,
                    score3: score3
                });
    
                // Αποθήκευση των σκορ και των απαντήσεων του χρήστη στο Firebase Database
                const userScoresRef = firebase.database().ref('user_scores/' + user.uid);
                userScoresRef.set({
                    score1: score1,
                    score2: score2,
                    score3: score3
                });
    
                alert('Τα αποτελέσματά σας αποθηκεύτηκαν επιτυχώς!');
    
                setTimeout(function() {
                    // Ανακατεύθυνση στη σελίδα αποτελεσμάτων
                    window.location.href = 'user_results.html';
                }, 1500);
            });
        });
    </script>     
    <script src="script.js"></script>
</body>
</html>